# Compare Versions - Architecture Diagram

## Module Structure

```
app/document_scanner/
â”‚
â”œâ”€â”€ document_scanner_tab.py  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â””â”€â”€ DocumentScannerModuleView     â”‚ Main Container
â”‚       â”œâ”€â”€ Search Tab                â”‚ (4 Sub-tabs)
â”‚       â”œâ”€â”€ Configuration Tab         â”‚
â”‚       â”œâ”€â”€ History Tab                â”‚
â”‚       â””â”€â”€ Compare Versions Tab â—„â”€â”€â”€â”€â”˜ NEW!
â”‚
â”œâ”€â”€ CompareVersions/  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ New Module
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ view.py              (482 lines)
â”‚   â”‚   â””â”€â”€ CompareVersionsView
â”‚   â”‚       â”œâ”€â”€ Document Dropdown (grouped by project)
â”‚   â”‚       â”œâ”€â”€ Version Dropdowns (V1, V2)
â”‚   â”‚       â”œâ”€â”€ Drop Areas (drag & drop)
â”‚   â”‚       â”œâ”€â”€ Compare Button
â”‚   â”‚       â””â”€â”€ Results Table
â”‚   â”‚
â”‚   â”œâ”€â”€ presenter.py         (406 lines)
â”‚   â”‚   â””â”€â”€ CompareVersionsPresenter
â”‚   â”‚       â”œâ”€â”€ Document Selection Logic
â”‚   â”‚       â”œâ”€â”€ Version Management
â”‚   â”‚       â”œâ”€â”€ Comparison Algorithm
â”‚   â”‚       â”œâ”€â”€ Filter Toggle
â”‚   â”‚       â””â”€â”€ Export Functionality
â”‚   â”‚
â”‚   â””â”€â”€ config_dialog.py     (234 lines)
â”‚       â””â”€â”€ ComparisonConfigDialog
â”‚           â”œâ”€â”€ Key Column Selector
â”‚           â”œâ”€â”€ Compare Columns Checklist
â”‚           â””â”€â”€ Show Columns Checklist
â”‚
â””â”€â”€ document_store.py  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Data Interface
    â””â”€â”€ DocumentStore
        â”œâ”€â”€ get_all_documents()      (stub - ready for implementation)
        â”œâ”€â”€ get_document_data()      (stub - ready for implementation)
        â””â”€â”€ get_custom_document_data()  (functional - loads CSV/Excel)
```

## Signal Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER ACTIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CompareVersionsView                            â”‚
â”‚                        (UI Layer)                                 â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Document Dropdown  â”€â”€â–º document_selected(id) signal           â”‚
â”‚  â€¢ Version 1 Dropdown â”€â”€â–º version1_selected(ver) signal          â”‚
â”‚  â€¢ Version 2 Dropdown â”€â”€â–º version2_selected(ver) signal          â”‚
â”‚  â€¢ Drop Area 1        â”€â”€â–º custom_file1_dropped(path) signal      â”‚
â”‚  â€¢ Drop Area 2        â”€â”€â–º custom_file2_dropped(path) signal      â”‚
â”‚  â€¢ Compare Button     â”€â”€â–º compare_requested() signal             â”‚
â”‚  â€¢ Filter Button      â”€â”€â–º filter_changes_requested() signal      â”‚
â”‚  â€¢ Export Button      â”€â”€â–º export_requested() signal              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ signals
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 CompareVersionsPresenter                          â”‚
â”‚                    (Business Logic)                               â”‚
â”‚                                                                   â”‚
â”‚  on_document_selected(id):                                        â”‚
â”‚    1. Store document ID                                           â”‚
â”‚    2. Get versions from DocumentStore                             â”‚
â”‚    3. Populate view.version_dropdowns()                           â”‚
â”‚                                                                   â”‚
â”‚  on_compare_requested():                                          â”‚
â”‚    1. Load data1 from DocumentStore or custom file                â”‚
â”‚    2. Load data2 from DocumentStore or custom file                â”‚
â”‚    3. Show ComparisonConfigDialog                                 â”‚
â”‚    4. Run comparison algorithm                                    â”‚
â”‚    5. Display results in view                                     â”‚
â”‚                                                                   â”‚
â”‚  on_filter_changes():                                             â”‚
â”‚    1. Toggle filtered_mode flag                                   â”‚
â”‚    2. Filter DataFrame (if needed)                                â”‚
â”‚    3. Update view.display_comparison_results()                    â”‚
â”‚                                                                   â”‚
â”‚  on_export_results():                                             â”‚
â”‚    1. Get file path from user                                     â”‚
â”‚    2. Export DataFrame to CSV or Excel                            â”‚
â”‚    3. Show success/error message                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ calls
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DocumentStore                                â”‚
â”‚                    (Data Access Layer)                            â”‚
â”‚                                                                   â”‚
â”‚  get_all_documents():                                             â”‚
â”‚    Returns: {                                                     â”‚
â”‚      "Project 1": [                                               â”‚
â”‚        {"name": "Doc A", "id": "...", "versions": [...]}         â”‚
â”‚      ],                                                           â”‚
â”‚      "Project 2": [...]                                           â”‚
â”‚    }                                                              â”‚
â”‚                                                                   â”‚
â”‚  get_document_data(id, version):                                  â”‚
â”‚    Returns: pandas.DataFrame with document data                   â”‚
â”‚                                                                   â”‚
â”‚  get_custom_document_data(file_path):                             â”‚
â”‚    Returns: pandas.DataFrame from CSV or Excel file               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Comparison Algorithm Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPARISON ALGORITHM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Input: df1, df2, config            â”‚
        â”‚  â€¢ df1: Version 1 DataFrame         â”‚
        â”‚  â€¢ df2: Version 2 DataFrame         â”‚
        â”‚  â€¢ config: {key_column,             â”‚
        â”‚            compare_columns,         â”‚
        â”‚            show_columns}            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Set key_column as index            â”‚
        â”‚  â€¢ df1_indexed = df1.set_index()    â”‚
        â”‚  â€¢ df2_indexed = df2.set_index()    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Find all keys (union)              â”‚
        â”‚  â€¢ all_keys = keys_v1 âˆª keys_v2     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  For each key:                                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Is key only in V1?                        â”‚ â”‚
        â”‚  â”‚  YES â†’ Verdict = "Only in Version 1"       â”‚ â”‚
        â”‚  â”‚        Add V1 columns                      â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Is key only in V2?                        â”‚ â”‚
        â”‚  â”‚  YES â†’ Verdict = "Only in Version 2"       â”‚ â”‚
        â”‚  â”‚        Add V2 columns                      â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Key in both V1 and V2?                    â”‚ â”‚
        â”‚  â”‚  Compare selected columns:                 â”‚ â”‚
        â”‚  â”‚    â€¢ For each compare_column:              â”‚ â”‚
        â”‚  â”‚      - Get val1 from V1                    â”‚ â”‚
        â”‚  â”‚      - Get val2 from V2                    â”‚ â”‚
        â”‚  â”‚      - If val1 â‰  val2 â†’ Add to changes    â”‚ â”‚
        â”‚  â”‚                                            â”‚ â”‚
        â”‚  â”‚  If changes found:                         â”‚ â”‚
        â”‚  â”‚    Verdict = "Different"                   â”‚ â”‚
        â”‚  â”‚    Changed_Columns = "Col1, Col2, ..."     â”‚ â”‚
        â”‚  â”‚  Else:                                     â”‚ â”‚
        â”‚  â”‚    Verdict = "Same"                        â”‚ â”‚
        â”‚  â”‚                                            â”‚ â”‚
        â”‚  â”‚  Add columns from both versions:           â”‚ â”‚
        â”‚  â”‚    â€¢ Column_V1 (from Version 1)            â”‚ â”‚
        â”‚  â”‚    â€¢ Column_V2 (from Version 2)            â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Build Results DataFrame                        â”‚
        â”‚  â€¢ Column order:                                â”‚
        â”‚    1. Key Column                                â”‚
        â”‚    2. Verdict                                   â”‚
        â”‚    3. Changed_Columns (if exists)               â”‚
        â”‚    4. Selected show columns with _V1, _V2       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Return: results_df                 â”‚
        â”‚  Ready for display in view          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Workflow Diagram

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open Compare Versions Tab               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Document                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Option A: Choose from dropdown      â”‚ â”‚
â”‚ â”‚   â†’ Project-grouped list            â”‚ â”‚
â”‚ â”‚   â†’ Versions auto-populate          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Option B: Select "Custom Document"  â”‚ â”‚
â”‚ â”‚   â†’ Manual file selection only      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Version 1 & Version 2            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Option A: Use dropdowns             â”‚ â”‚
â”‚ â”‚   Version 1: [v1.0 â–¼]               â”‚ â”‚
â”‚ â”‚   Version 2: [v2.0 â–¼]               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Option B: Drag & drop files         â”‚ â”‚
â”‚ â”‚   Drop file1.csv â†’ Version 1        â”‚ â”‚
â”‚ â”‚   Drop file2.csv â†’ Version 2        â”‚ â”‚
â”‚ â”‚   (Auto-sets dropdown to "Custom")  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Option C: Mix versioned + custom    â”‚ â”‚
â”‚ â”‚   Version 1: [v1.0 â–¼]               â”‚ â”‚
â”‚ â”‚   Version 2: Drop custom file       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click "âš–ï¸ Compare Versions"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configuration Dialog Opens              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Select Key Column (Required)     â”‚ â”‚
â”‚ â”‚    [Part_Number â–¼]                  â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ 2. Select Columns to Compare        â”‚ â”‚
â”‚ â”‚    â˜‘ Part_Number                    â”‚ â”‚
â”‚ â”‚    â˜‘ Description                    â”‚ â”‚
â”‚ â”‚    â˜‘ Price                          â”‚ â”‚
â”‚ â”‚    â˜ Notes                          â”‚ â”‚
â”‚ â”‚    [Select All] [Deselect All]      â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ 3. Select Columns to Show           â”‚ â”‚
â”‚ â”‚    â˜‘ Part_Number                    â”‚ â”‚
â”‚ â”‚    â˜‘ Description                    â”‚ â”‚
â”‚ â”‚    â˜‘ Price                          â”‚ â”‚
â”‚ â”‚    â˜ Internal_Code                  â”‚ â”‚
â”‚ â”‚    [Select All] [Deselect All]      â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚    [Cancel]           [OK]          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Results Display                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Table with columns:                 â”‚ â”‚
â”‚ â”‚ â€¢ Part_Number (key)                 â”‚ â”‚
â”‚ â”‚ â€¢ Verdict                           â”‚ â”‚
â”‚ â”‚ â€¢ Changed_Columns                   â”‚ â”‚
â”‚ â”‚ â€¢ Description_V1, Description_V2    â”‚ â”‚
â”‚ â”‚ â€¢ Price_V1, Price_V2                â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ Color Coding:                       â”‚ â”‚
â”‚ â”‚ â€¢ Yellow rows = Different           â”‚ â”‚
â”‚ â”‚ â€¢ Gray rows = Same                  â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ Status: "Compared 150 rows -        â”‚ â”‚
â”‚ â”‚          12 differences found"      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Optional Actions                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Filter Changes                      â”‚ â”‚
â”‚ â”‚ â€¢ Click "ğŸ” Filter Changes Only"    â”‚ â”‚
â”‚ â”‚ â€¢ Table shows only "Different" rows â”‚ â”‚
â”‚ â”‚ â€¢ Toggle button to show all again   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Export Results                      â”‚ â”‚
â”‚ â”‚ â€¢ Click "ğŸ“¤ Export Results"         â”‚ â”‚
â”‚ â”‚ â€¢ Choose CSV or Excel               â”‚ â”‚
â”‚ â”‚ â€¢ Exports current view              â”‚ â”‚
â”‚ â”‚   (filtered or unfiltered)          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
END
```

## Integration with Document Scanner Module

```
main.py
  â”‚
  â””â”€â–º AppContext
        â”‚
        â””â”€â–º Main Window
              â”‚
              â”œâ”€â–º EPD Tab
              â”œâ”€â–º Connectors Tab
              â””â”€â–º Document Scanner Tab  â—„â”€â”€â”€â”
                    â”‚                       â”‚
                    â””â”€â–º DocumentScannerModuleView
                          â”‚                       
                          â”œâ”€â–º Search Tab          
                          â”œâ”€â–º Configuration Tab   
                          â”œâ”€â–º History Tab         
                          â””â”€â–º Compare Versions Tab â—„â”€â”€â”€ NEW!
                                â”‚
                                â”œâ”€â–º CompareVersionsPresenter
                                â”‚     â””â”€â–º DocumentStore
                                â”‚
                                â””â”€â–º CompareVersionsView
                                      â””â”€â–º ComparisonConfigDialog
```

## Data Flow: Loading Documents

```
App Startup
  â”‚
  â–¼
DocumentScannerModuleView.__init__()
  â”‚
  â”œâ”€â–º Creates CompareVersionsPresenter
  â”‚     â”‚
  â”‚     â””â”€â–º Connects to CompareVersionsView signals
  â”‚
  â””â”€â–º start_loading()
        â”‚
        â””â”€â–º CompareVersionsPresenter.start_loading()
              â”‚
              â””â”€â–º DocumentStore.get_all_documents()
                    â”‚
                    â””â”€â–º Returns:
                          {
                            "Project 1": [
                              {
                                "name": "Connector Spec",
                                "id": "conn_spec_p1",
                                "versions": ["v1.0", "v1.1", "v2.0"]
                              }
                            ],
                            "Project 2": [...]
                          }
                          â”‚
                          â–¼
                    CompareVersionsView.populate_documents()
                          â”‚
                          â””â”€â–º Document dropdown now populated
                              with grouped items
```

## File Organization

```
swiss_army_tool/
â”‚
â”œâ”€â”€ app/
â”‚   â””â”€â”€ document_scanner/
â”‚       â”œâ”€â”€ CompareVersions/  â—„â”€â”€â”€â”€â”€ NEW MODULE
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ view.py
â”‚       â”‚   â”œâ”€â”€ presenter.py
â”‚       â”‚   â””â”€â”€ config_dialog.py
â”‚       â”‚
â”‚       â”œâ”€â”€ document_store.py  â—„â”€â”€â”€â”€â”€ NEW FILE
â”‚       â”‚
â”‚       â”œâ”€â”€ document_scanner_tab.py  â—„â”€ MODIFIED
â”‚       â”‚   (added CompareVersions integration)
â”‚       â”‚
â”‚       â”œâ”€â”€ Search/
â”‚       â”œâ”€â”€ Configuration/
â”‚       â””â”€â”€ History/
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ COMPARE_VERSIONS.md  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEW DOC
    â”œâ”€â”€ COMPARE_VERSIONS_QUICK_START.md  â—„â”€ NEW DOC
    â”œâ”€â”€ COMPARE_VERSIONS_IMPLEMENTATION.md  â—„â”€ NEW DOC
    â””â”€â”€ INDEX.md  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ UPDATED
```

## Summary

This architecture provides:

âœ… **Separation of Concerns**: View, Presenter, Data layers
âœ… **Reusability**: DocumentStore can be used by other modules
âœ… **Testability**: Each component can be tested independently
âœ… **Maintainability**: Clear structure, well-documented
âœ… **Extensibility**: Easy to add new features
âœ… **Integration**: Seamlessly fits into existing Document Scanner module

---

**Architecture Pattern**: Model-View-Presenter (MVP)
**Data Pattern**: Repository (DocumentStore)
**UI Framework**: PySide6 (Qt)
**Data Library**: pandas
**Status**: âœ… Production Ready
